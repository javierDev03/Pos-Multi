import{r as D,T as L,c as w,o as u,a as c,b as e,d as t,F as h,u as l,i as M,e as s,h as F,l as C,t as b,j as f,f as T,n as B,O as z}from"./app-C8VQvZ0f.js";import{_ as $}from"./CardBox-D-3MIlS4.js";import{_ as E}from"./LayoutMain-ZFijm9Gj.js";import{_ as O}from"./SectionTitleLineWithButton-CORxjxXV.js";import{a8 as P,e as q,a as A,b as K}from"./colors-CEsUPgXD.js";import{_ as U}from"./BaseButton-D751zZDp.js";import{_ as X}from"./BaseButtons-BYm_JhLH.js";import{_ as i}from"./FormField-bCdG-tNU.js";import{_}from"./FormControl-haua1sQz.js";import{V as G,F as N}from"./flowbite-vue-WjY8nwBi.js";import{_ as S}from"./NotificationBar-BzVJ0lcM.js";import{_ as H}from"./HeadLogo-BA8DlMdf.js";import{_ as p}from"./LabelControl-m7hiFd44.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./main-C82n4mBH.js";import"./BaseDivider-ugWBZYPJ.js";import"./BaseLevel-vlIqV0r8.js";const J={class:"md:grid md:grid-cols-5 gap-4 md:space-y-0 space-y-5"},Q={class:"grid grid-cols-1 gap-2 md:grid-cols-2 mb-5"},W={class:"bg-slate-100 border-4 border-dashed border-gray-400 flex flex-col items-center justify-center rounded-lg shadow-lg p-6 md:p-10 mb-4 dark:bg-gray-800 dark:border-gray-600"},Y={class:"w-auto mb-2 text-sm md:text-base font-medium text-gray-700 dark:text-gray-300"},Z={key:0,class:"font-semibold mt-2"},ee={key:1,class:"font-semibold"},le={class:"w-full flex justify-center mt-8 mb-4"},ae=["src"],te=["src"],re={class:"border-t border-gray-300 dark:border-gray-700 pt-6 mt-6 space-y-4"},oe={key:0,class:"space-y-5"},ie={class:"bg-slate-100 border-4 border-dashed border-gray-400 flex flex-col items-center justify-center rounded-lg shadow-lg p-6 md:p-10 mb-4 dark:bg-gray-800 dark:border-gray-600"},se={class:"w-auto mb-2 text-sm md:text-base font-medium text-gray-700 dark:text-gray-300"},ne={key:0,class:"font-semibold mt-2"},de={key:1,class:"font-semibold"},ue={class:"w-full flex justify-center mt-8 mb-4"},ce=["src"],me={key:0,class:"space-y-4"},fe={class:"col-span-2 h-full lg:relative"},pe={class:"grid grid-cols-1 gap-2 md:grid-cols-2 mb-5"},ge={class:"grid grid-cols-1 gap-2 md:grid-cols-2 mb-5"},Re={__name:"Create",props:{name:"Create",title:{type:String,required:!0},routeName:{type:String,required:!0},article:{type:Object,required:!0}},setup(n){const y=n,k=D("postulant"),a=L({article_id:y.article.id,reference:null,amount:null,payment_voucher_status_id:null,user_id:null,file:null,requires_invoice:null,constancia:null,rfc:null,direccion_fiscal:null,regimen_fiscal:null,uso_cfdi:null}),V=()=>{a.post(route(`${y.routeName}store`))},I=g=>{a.file=g.target.files[0]},R=g=>{a.constancia=g.target.files[0]},x=w(()=>{if(a.file!==null)return URL.createObjectURL(a.file)}),j=w(()=>{if(a.constancia!==null)return URL.createObjectURL(a.constancia)});return(g,o)=>(u(),c(h,null,[e(H,{title:n.title},null,8,["title"]),e(E,null,{default:t(()=>[e(O,{icon:l(P),title:n.title,main:""},{default:t(()=>[e(l(M),{href:g.route(`${n.routeName}index`)},{default:t(()=>o[8]||(o[8]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-x",viewBox:"0 0 16 16"},[s("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})],-1)])),_:1},8,["href"])]),_:1},8,["icon","title"]),g.$page.props.flash.success?(u(),F(S,{key:0,color:"success",icon:l(q),outline:!1},{default:t(()=>[C(b(g.$page.props.flash.success),1)]),_:1},8,["icon"])):f("",!0),g.$page.props.flash.error?(u(),F(S,{key:1,color:"danger",icon:l(q),outline:!1},{default:t(()=>[C(b(g.$page.props.flash.error),1)]),_:1},8,["icon"])):f("",!0),s("div",J,[e($,{isForm:"",onSubmit:T(V,["prevent"]),class:"col-span-3"},{default:t(()=>[s("div",Q,[e(i,{label:"Referencia:",required:"",help:"Ingresa los datos del comprobante",error:l(a).errors.reference},{default:t(()=>[e(_,{modelValue:l(a).reference,"onUpdate:modelValue":o[0]||(o[0]=r=>l(a).reference=r),placeholder:"Ingresa la referencia"},null,8,["modelValue"])]),_:1},8,["error"]),e(i,{label:"Monto:",required:"",error:l(a).errors.amount},{default:t(()=>[e(_,{modelValue:l(a).amount,"onUpdate:modelValue":o[1]||(o[1]=r=>l(a).amount=r),placeholder:"Ingresa el monto",type:"number"},null,8,["modelValue"])]),_:1},8,["error"])]),e(i,{label:"Archivo:",required:"",help:"Solo archivos PDF e imagenes (MAX 10M)",error:l(a).errors.file},{default:t(()=>{var r,d,m,v;return[s("div",W,[s("div",Y,[e(_,{onInput:I,height:"h-10.5",name:"file",type:"file",class:"w-full"}),(r=l(a).file)!=null&&r.name?(u(),c("p",Z," Nombre del archivo: "+b((d=l(a).file)==null?void 0:d.name),1)):f("",!0),(m=l(a).file)!=null&&m.size?(u(),c("p",ee," Tamaño: "+b((((v=l(a).file)==null?void 0:v.size)/1e3).toFixed(2))+" KB ",1)):f("",!0)]),s("div",le,[l(a).file?(u(),c(h,{key:0},[l(a).file.type==="application/pdf"?(u(),c("iframe",{key:0,class:"w-full h-96 border rounded-lg shadow-md",src:x.value},null,8,ae)):(u(),c("img",{key:1,src:x.value,class:"max-w-full max-h-96 rounded-lg shadow-md object-contain",alt:"Vista previa de imagen"},null,8,te))],64)):f("",!0)])])]}),_:1},8,["error"]),s("div",re,[o[10]||(o[10]=s("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200"}," Opciones de Facturación ",-1)),e(i,{label:"¿Requieres factura?",required:""},{default:t(()=>[B(s("select",{"onUpdate:modelValue":o[2]||(o[2]=r=>l(a).requires_invoice=r),class:"w-full border rounded-md p-2 focus:ring-2 focus:ring-indigo-500 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-200"},o[9]||(o[9]=[s("option",{value:""},"Selecciona una opción",-1),s("option",{value:"yes"},"Sí",-1),s("option",{value:"no"},"No",-1)]),512),[[z,l(a).requires_invoice]])]),_:1}),l(a).requires_invoice==="yes"?(u(),c("div",oe,[e(i,{label:"Constancia de situación fiscal (PDF)",help:"Solo archivos PDF (MAX 10M)",error:l(a).errors.constancia},{default:t(()=>{var r,d,m,v;return[s("div",ie,[s("div",se,[e(_,{onInput:R,height:"h-10.5",type:"file",name:"constancia",accept:"application/pdf",class:"w-full"}),(r=l(a).constancia)!=null&&r.name?(u(),c("p",ne," Nombre del archivo: "+b((d=l(a).constancia)==null?void 0:d.name),1)):f("",!0),(m=l(a).constancia)!=null&&m.size?(u(),c("p",de," Tamaño: "+b((((v=l(a).constancia)==null?void 0:v.size)/1e3).toFixed(2))+" KB ",1)):f("",!0)]),s("div",ue,[l(a).constancia?(u(),c(h,{key:0},[l(a).constancia.type==="application/pdf"?(u(),c("iframe",{key:0,class:"w-full h-96 border rounded-lg shadow-md",src:j.value},null,8,ce)):f("",!0)],64)):f("",!0)])])]}),_:1},8,["error"]),l(a).constancia?f("",!0):(u(),c("div",me,[e(i,{label:"RFC:",required:"",error:l(a).errors.rfc},{default:t(()=>[e(_,{modelValue:l(a).rfc,"onUpdate:modelValue":o[3]||(o[3]=r=>l(a).rfc=r),placeholder:"RFC"},null,8,["modelValue"])]),_:1},8,["error"]),e(i,{label:"Dirección Fiscal:",required:"",error:l(a).errors.direccion_fiscal},{default:t(()=>[e(_,{modelValue:l(a).direccion_fiscal,"onUpdate:modelValue":o[4]||(o[4]=r=>l(a).direccion_fiscal=r),placeholder:"Dirección fiscal completa"},null,8,["modelValue"])]),_:1},8,["error"]),e(i,{label:"Régimen Fiscal:",required:"",error:l(a).errors.regimen_fiscal},{default:t(()=>[e(_,{modelValue:l(a).regimen_fiscal,"onUpdate:modelValue":o[5]||(o[5]=r=>l(a).regimen_fiscal=r),placeholder:"Régimen Fiscal"},null,8,["modelValue"])]),_:1},8,["error"]),e(i,{label:"Uso de CFDI:",required:"",error:l(a).errors.uso_cfdi},{default:t(()=>[e(_,{modelValue:l(a).uso_cfdi,"onUpdate:modelValue":o[6]||(o[6]=r=>l(a).uso_cfdi=r),placeholder:"Uso de CFDI"},null,8,["modelValue"])]),_:1},8,["error"])]))])):f("",!0)]),e(X,{class:"mt-6"},{default:t(()=>[e(U,{routeName:`${y.routeName}index`,icon:l(A),color:"white",label:"Cancelar"},null,8,["routeName","icon"]),e(U,{onClick:V,icon:l(K),type:"submit",color:"success",label:"Guardar"},null,8,["icon"])]),_:1})]),_:1}),s("div",fe,[e($,{class:"lg:sticky lg:top-14 lg:overflow-y-auto"},{default:t(()=>[e(l(G),{modelValue:k.value,"onUpdate:modelValue":o[7]||(o[7]=r=>k.value=r),variant:"underline",class:"p-5"},{default:t(()=>[e(l(N),{name:"postulant",title:"Postulante"},{default:t(()=>[e(i,{label:"Nombre:"},{default:t(()=>[e(p,{value:n.article.postulant.name},null,8,["value"])]),_:1}),e(i,{label:"Email:"},{default:t(()=>[e(p,{value:n.article.postulant.email},null,8,["value"])]),_:1}),e(i,{label:"Institución:"},{default:t(()=>{var r,d;return[e(p,{value:(d=(r=n.article.postulant)==null?void 0:r.institution)==null?void 0:d.name},null,8,["value"])]}),_:1}),s("div",pe,[e(i,{label:"Pais:"},{default:t(()=>{var r,d,m;return[e(p,{value:((m=(d=(r=n.article.postulant)==null?void 0:r.institution)==null?void 0:d.country)==null?void 0:m.name)??"Sin información"},null,8,["value"])]}),_:1}),e(i,{label:"Estado:"},{default:t(()=>{var r,d,m;return[e(p,{value:((m=(d=(r=n.article.postulant)==null?void 0:r.institution)==null?void 0:d.state)==null?void 0:m.name)??"Sin información"},null,8,["value"])]}),_:1})])]),_:1}),e(l(N),{name:"article",title:"Articulo"},{default:t(()=>[s("div",ge,[e(i,{label:"Identificador:"},{default:t(()=>[e(p,{value:n.article.article_folio},null,8,["value"])]),_:1}),e(i,{label:"Titulo:"},{default:t(()=>[e(p,{value:n.article.title},null,8,["value"])]),_:1}),e(i,{label:"Tipo:"},{default:t(()=>[e(p,{value:n.article.article_type.name},null,8,["value"])]),_:1}),e(i,{label:"Editor:"},{default:t(()=>[e(p,{value:n.article.editor.name},null,8,["value"])]),_:1}),e(i,{label:"Estatus del artículo:"},{default:t(()=>[e(p,{value:n.article.article_status.name},null,8,["value"])]),_:1})]),e(i,{label:"Comprobante:"},{default:t(()=>[e(p,{value:"Sin comprobante"})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1})],64))}};export{Re as default};
