import{_ as A}from"./HeadLogo-BA8DlMdf.js";import{b as $,a as P,_ as B}from"./SectionTitleLineWithButton-CORxjxXV.js";import{_ as E,h as z,E as I}from"./jspdf.es.min-C7hkvkyA.js";import{a4 as V}from"./colors-CEsUPgXD.js";import{C as k,r as N}from"./chart-CH8-U_Kh.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as w,z as j,J as F,o as y,a as u,b as d,d as i,F as v,u as M,e as r,l as b,g as q,q as G,t as n}from"./app-C8VQvZ0f.js";import"./main-C82n4mBH.js";import"./BaseDivider-ugWBZYPJ.js";const O={id:"charts-pdf-content",class:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow relative"},R={class:"absolute top-4 right-4 z-10 no-capture"},T={class:"rounded-md bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-md dark:shadow-lg"},W={class:"mt-8 overflow-x-auto shadow-md rounded-lg"},J={class:"min-w-full border border-gray-200 dark:border-gray-700"},L={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700"},U={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700"},H={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700"},Z={class:"bg-gray-100 dark:bg-gray-700 font-semibold"},K={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700"},Q={__name:"ArticlesByArea",props:{chartData:{type:Array,required:!0,default:()=>[]}},setup(g){const s=g;function x(a,t=.5){return`hsla(${a*60%360}, 70%, 70%, ${t})`}k.register(...N);const C=w({labels:s.chartData.map(a=>a.name),datasets:[{label:"Artículos por Área Prioritaria",data:s.chartData.map(a=>a.total),backgroundColor:s.chartData.map(a=>x(a.id,.5)),borderColor:s.chartData.map(a=>x(a.id,1)),borderWidth:1}]}),_=w({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{size:14}}},title:{display:!0,text:"Distribución de Artículos por Áreas Prioritarias",font:{size:16}},tooltip:{callbacks:{label:function(a){const t=s.chartData[a.dataIndex];return[`Área: ${t.name}`,`Programa: ${t.program}`,`Artículos: ${a.raw}`]}}}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1,precision:0},title:{display:!0,text:"Cantidad de Artículos"}},x:{title:{display:!0,text:"Áreas Prioritarias"}}}});let l=null;j(()=>{const a=document.getElementById("articlesChart");a&&(l=new k(a,{type:"bar",data:C.value,options:_.value}))}),F(()=>{l&&(l.destroy(),l=null)});async function p(a="pdf"){try{const t=document.getElementById("charts-pdf-content");if(!t)return;const e=document.querySelectorAll(".no-capture");e.forEach(o=>o.style.visibility="hidden");const c=await z(t,{backgroundColor:null,scale:2,logging:!1,useCORS:!0});e.forEach(o=>o.style.visibility="visible");const m=c.toDataURL(`image/${a==="pdf"?"png":a}`);if(a==="pdf"){const o=new I("p","mm","a4"),f=o.getImageProperties(m),h=o.internal.pageSize.getWidth(),D=f.height*h/f.width;o.addImage(m,"PNG",0,0,h,D),o.save("articulos_por_area.pdf")}else{const o=document.createElement("a");o.href=m,o.download=`articulos_por_area.${a}`,o.click()}}catch(t){console.error("Error al generar el documento:",t)}}return(a,t)=>(y(),u(v,null,[d(A,{title:"Artículos por área prioritaria"}),d($,null,{default:i(()=>[d(P,null,{default:i(()=>[d(B,{icon:M(V),title:"Artículos Por Área Prioritaria",main:""},null,8,["icon"]),r("div",O,[r("div",R,[d(E,null,{trigger:i(()=>t[3]||(t[3]=[r("button",{class:"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 text-sm text-gray-800 dark:text-white px-3 py-2 rounded"}," Opciones ",-1)])),content:i(()=>[r("ul",T,[r("li",null,[r("button",{onClick:t[0]||(t[0]=e=>p("png")),class:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"},t[4]||(t[4]=[r("span",{class:"flex items-center"},[r("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})]),b(" Descargar PNG ")],-1)]))]),r("li",null,[r("button",{onClick:t[1]||(t[1]=e=>p("jpg")),class:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"},t[5]||(t[5]=[r("span",{class:"flex items-center"},[r("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})]),b(" Descargar JPG ")],-1)]))]),r("li",null,[r("button",{onClick:t[2]||(t[2]=e=>p("pdf")),class:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"},t[6]||(t[6]=[r("span",{class:"flex items-center"},[r("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})]),b(" Descargar PDF ")],-1)]))])])]),_:1})]),t[11]||(t[11]=r("div",{class:"chart-container dark:text-gray-300",style:{position:"relative",height:"400px",width:"100%"}},[r("canvas",{id:"articlesChart"})],-1)),r("div",W,[t[10]||(t[10]=r("h2",{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200"},"Datos detallados",-1)),r("table",J,[t[9]||(t[9]=r("thead",{class:"bg-gray-50 dark:bg-gray-800"},[r("tr",null,[r("th",{scope:"col",class:"px-4 sm:px-6 py-3 border-b border-gray-200 dark:border-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Área Prioritaria "),r("th",{scope:"col",class:"px-4 sm:px-6 py-3 border-b border-gray-200 dark:border-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Programa "),r("th",{scope:"col",class:"px-4 sm:px-6 py-3 border-b border-gray-200 dark:border-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Artículos ")])],-1)),r("tbody",null,[(y(!0),u(v,null,q(g.chartData,e=>(y(),u("tr",{key:e.id,class:G({"bg-gray-50 dark:bg-gray-700":e.id%2===0,"bg-white dark:bg-gray-800":e.id%2!==0})},[r("td",L,n(e.name),1),r("td",U,n(e.program),1),r("td",H,n(e.total),1)],2))),128)),r("tr",Z,[t[7]||(t[7]=r("td",{class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700"}," Total ",-1)),t[8]||(t[8]=r("td",{class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700"}," - ",-1)),r("td",K,n(g.chartData.reduce((e,c)=>e+c.total,0)),1)])])])])])]),_:1})]),_:1})],64))}},lr=S(Q,[["__scopeId","data-v-a5375142"]]);export{lr as default};
