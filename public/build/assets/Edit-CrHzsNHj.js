import{r as w,T as B,c as V,p as F,o as N,a as E,b as l,d as a,F as L,u as t,i as S,e as m,f as q,k as y}from"./app-C8VQvZ0f.js";import{_ as R}from"./CardBox-D-3MIlS4.js";import{_ as k}from"./LayoutMain-ZFijm9Gj.js";import{_ as T}from"./SectionTitleLineWithButton-CORxjxXV.js";import{d as O,a as I,b as j,c as D}from"./colors-CEsUPgXD.js";import{_ as f}from"./BaseButton-D751zZDp.js";import{_ as A}from"./BaseButtons-BYm_JhLH.js";import{S as b}from"./sweetalert2.esm.all-BccGxJ0c.js";/* empty css                        */import{_ as u}from"./FormField-bCdG-tNU.js";import{_ as s}from"./FormControl-haua1sQz.js";import M from"./InputFile-CN6hl_XQ.js";import z from"./InputImage-DjMscGzb.js";import h from"./Iframe-BFd9Qj9f.js";import{_ as G}from"./Select-CVkdm-Ju.js";import{_ as P}from"./HeadLogo-BA8DlMdf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./main-C82n4mBH.js";import"./BaseDivider-ugWBZYPJ.js";import"./_baseGetTag-zIT0YVv4.js";const H={class:"md:grid md:grid-cols-2 gap-4"},J={class:"md:grid md:grid-cols-2 gap-4"},pe={__name:"Edit",props:{name:"Edit",title:{type:String,required:!0},routeName:{type:String,required:!0},call:{type:Object,required:!0}},setup(n){var _,g;const o=n,c=w(null),v=[{id:1,name:"Activo"},{id:0,name:"No activo"}],e=B({_method:"patch",forceFormData:!0,id:o.call.id,title:o.call.title,description:o.call.description,start_date:o.call.start_date,end_date:o.call.end_date,status:o.call.status,url:o.call.url,file:null,file_id:(_=o.call.file)==null?void 0:_.id,image:null,image_id:(g=o.call.image)==null?void 0:g.id,institution_id:o.call.institution_id}),p=()=>{e.post(route(`${o.routeName}update`,o.call.id))},$=()=>{b.fire({title:"¿Esta seguro?",text:"Esta acción no se puede revertir",icon:"warning",showCancelButton:!0,cancelButtonText:"Cancelar",cancelButtonColor:"#1C64F2",confirmButtonColor:"#E02424",confirmButtonText:"Si!, eliminar registro!"}).then(d=>{d.isConfirmed&&e.delete(route(`${o.routeName}destroy`,o.call.id))})},x=d=>{y.get(route("institution.filter",d)).then(r=>{c.value=r.data,console.log(c)}).catch(function(r){r.response&&r.response.status==500&&b.fire({title:"ERRO!",text:"Error",icon:"info",confirmButtonColor:"#3085d6",confirmButtonText:"Ok!"})})},C=V(()=>e.file!=null?URL.createObjectURL(e.file):null),U=V(()=>e.image!=null?URL.createObjectURL(e.image):null);return F("form",e),(d,r)=>(N(),E(L,null,[l(P,{title:n.title},null,8,["title"]),l(k,null,{default:a(()=>[l(T,{icon:t(O),title:n.title,main:""},{default:a(()=>[l(t(S),{href:d.route(`${n.routeName}index`)},{default:a(()=>r[7]||(r[7]=[m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-x",viewBox:"0 0 16 16"},[m("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})],-1)])),_:1},8,["href"])]),_:1},8,["icon","title"]),l(R,{isForm:"",onSubmit:q(p,["prevent"])},{footer:a(()=>[l(A,null,{default:a(()=>[l(f,{routeName:`${n.routeName}index`,icon:t(I),color:"white",label:"Cancelar"},null,8,["routeName","icon"]),l(f,{onClick:p,icon:t(j),type:"submit",color:"success",label:"Guardar"},null,8,["icon"]),l(f,{color:"danger",icon:t(D),onClick:$,label:"Eliminar"},null,8,["icon"])]),_:1})]),default:a(()=>[l(u,{label:"Título:",required:"",error:t(e).errors.title},{default:a(()=>[l(s,{modelValue:t(e).title,"onUpdate:modelValue":r[0]||(r[0]=i=>t(e).title=i),placeholder:"Nombre de la convocatoria"},null,8,["modelValue"])]),_:1},8,["error"]),l(u,{label:"Descripción:",required:"",help:"",error:t(e).errors.description},{default:a(()=>[l(s,{type:"textarea",modelValue:t(e).description,"onUpdate:modelValue":r[1]||(r[1]=i=>t(e).description=i),placeholder:"Descripción",height:"h-56"},null,8,["modelValue"])]),_:1},8,["error"]),m("div",H,[l(u,{label:"Fecha de inicio:",required:"",help:"Inicio de la convocatoria",error:t(e).errors.start_date},{default:a(()=>[l(s,{type:"date",modelValue:t(e).start_date,"onUpdate:modelValue":r[2]||(r[2]=i=>t(e).start_date=i)},null,8,["modelValue"])]),_:1},8,["error"]),l(u,{label:"Fecha fin:",required:"",help:"Fin de la convocatoria",error:t(e).errors.end_date},{default:a(()=>[l(s,{type:"date",modelValue:t(e).end_date,"onUpdate:modelValue":r[3]||(r[3]=i=>t(e).end_date=i)},null,8,["modelValue"])]),_:1},8,["error"])]),l(u,{label:"Estatus:",required:"",error:t(e).errors.status},{default:a(()=>[l(s,{modelValue:t(e).status,"onUpdate:modelValue":r[4]||(r[4]=i=>t(e).status=i),options:v},null,8,["modelValue"])]),_:1},8,["error"]),m("div",J,[l(u,{label:"Url:",help:"",error:t(e).errors.url},{default:a(()=>[l(s,{modelValue:t(e).url,"onUpdate:modelValue":r[5]||(r[5]=i=>t(e).url=i),placeholder:"Agrega un enlace"},null,8,["modelValue"])]),_:1},8,["error"]),l(u,{required:"",label:"Institución:",error:t(e).errors.institution_id,class:"dark:text-white"},{default:a(()=>[l(G,{placeholder:"Busca una institución",itemSelected:n.call.institution,modelValue:t(e).institution_id,"onUpdate:modelValue":r[6]||(r[6]=i=>t(e).institution_id=i),options:c.value,onSearch:x},null,8,["itemSelected","modelValue","options"])]),_:1},8,["error"])]),l(M,{file:t(e).file?t(e).file:n.call.file},{iframe:a(()=>{var i;return[l(h,{url:t(e).file?C.value:"/storage/"+((i=n.call.file)==null?void 0:i.path)},null,8,["url"])]}),_:1},8,["file"]),l(z,{image:t(e).image?t(e).image:n.call.image},{iframe:a(()=>{var i;return[l(h,{url:t(e).image?U.value:"/storage/"+((i=n.call.image)==null?void 0:i.path)},null,8,["url"])]}),_:1},8,["image"])]),_:1})]),_:1})],64))}};export{pe as default};
