import{r as p,T as U,w as q,o as h,a as $,e as i,b as o,u as r,d as s,F as A,f as P,q as R,k as _}from"./app-DdNFHAqW.js";import{g as y,r as B,q as E,s as x}from"./colors-inGVzw7t.js";import{_ as I,a as L}from"./SectionFullScreen--Gtz-0wI.js";import{_ as N}from"./CardBox-CmyBJRt6.js";import{_ as O}from"./FormValidationErrors-CxJ7PVHl.js";import{_ as n}from"./FormField-CILI8Nf7.js";import{_ as d}from"./FormControl-bDY0Yb_I.js";import{_ as g}from"./BaseButton-sgO_vKHC.js";import{_ as S}from"./BaseButtons-D7HU0kj1.js";import{_ as T}from"./Select-BJN33FS9.js";import{L as M}from"./index-B423c0q9.js";import{S as w}from"./sweetalert2.esm.all-BccGxJ0c.js";/* empty css                        */import{_ as D}from"./InputError-B-EUtzjq.js";import"./lodash-DkZ3wxhl.js";import{_ as F}from"./HeadLogo-B8dNSx1m.js";import"./Navbar-CwLcd33U.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./flowbite-vue-B3Oz5FTX.js";import"./main-B-O7UoXT.js";import"./_baseGetTag-Ddn2H9e8.js";const j={class:"vl-parent"},z={class:"w-[650px] mx-auto py-10"},G={class:"mb-5"},H={class:"md:flex md:space-x-1 mb-1 mt-2"},J={class:"md:w-full max-lg:mb-5"},K={class:"max-lg:mb-5 my-auto"},ge={__name:"RegisterEditor",props:{areas:{type:Object,required:!0,default:{}}},setup(C){const c=C,b=c.areas.filter(l=>l.parent_id===null)??[],f=p([]),t=U({curp:null,name:null,email:null,password:null,password_confirmation:null,knowledge_area_id:null,institution_id:null,selectedArea:null}),u=p(!1),v=()=>{t.post(route("registerEditor.storeEditores"))},V=()=>{u.value=!0,_.get(route("user.getCurp",t.curp.toUpperCase())).then(l=>{u.value=!1;const e=l.data.dataCurp;t.name=e.nombres.toUpperCase()+" "+e.apellidoPaterno.toUpperCase()+" "+e.apellidoMaterno.toUpperCase()}).catch(function(l){l.response&&l.response.status==500&&w.fire({title:"CURP Incorrecta!",text:"La CURP ingresada no es valida, intente nuevamente",icon:"info",confirmButtonColor:"#3085d6",confirmButtonText:"Ok!"}),t.reset("name"),u.value=!1})},m=p(null),k=l=>{_.get(route("institution.filter",l)).then(e=>{m.value=e.data,console.log(m)}).catch(function(e){e.response&&e.response.status==500&&w.fire({title:"ERRO!",text:"Error",icon:"info",confirmButtonColor:"#3085d6",confirmButtonText:"Ok!"})})};return q(()=>t.selectedArea,()=>{t.knowledge_area_id=null,f.value=c.areas.filter(l=>l.parent_id===t.selectedArea)}),(l,e)=>(h(),$(A,null,[i("div",j,[o(r(M),{active:u.value,"onUpdate:active":e[0]||(e[0]=a=>u.value=a),"can-cancel":!1,"is-full-page":!0},null,8,["active"])]),o(F,{title:"Registro"}),o(I,null,{default:s(()=>[o(L,{bg:"white"},{default:s(()=>[i("div",z,[o(N,{rounded:"rounded-lg",padding:"p-6","is-form":"",onSubmit:P(v,["prevent"])},{default:s(()=>[e[11]||(e[11]=i("h1",{class:"mb-4 text-center text-2xl lg:text-3xl font-bold dark:text-white"}," Registro para Editores CITCA 2025 ",-1)),o(O,{class:"mt-4"}),i("div",G,[e[10]||(e[10]=i("label",{class:"font-bold dark:text-white"},"CURP:",-1)),i("div",H,[i("div",J,[o(d,{textClass:"dark:text-white",placeholder:"Ingresa CURP",modelValue:r(t).curp,"onUpdate:modelValue":e[1]||(e[1]=a=>r(t).curp=a),maxlength:"18"},null,8,["modelValue"])]),i("div",K,[o(g,{class:"w-full",label:"Buscar CURP",color:"info",icon:r(y),onClick:e[2]||(e[2]=a=>V())},null,8,["icon"])])]),o(D,{class:"mb-5",message:r(t).errors.curp},null,8,["message"])]),o(n,{required:"",textClass:"dark:text-white",label:"Nombre completo:",help:"Por favor, introduce tu nombre completo",error:r(t).errors.name},{default:s(()=>[o(d,{modelValue:r(t).name,"onUpdate:modelValue":e[3]||(e[3]=a=>r(t).name=a),icon:r(B),placeholder:"Nombre completo",required:""},null,8,["modelValue","icon"])]),_:1},8,["error"]),o(n,{required:"",textClass:"dark:text-white",label:"Correo electrónico:",help:"Por favor, introduce tu email",error:r(t).errors.email},{default:s(()=>[o(d,{modelValue:r(t).email,"onUpdate:modelValue":e[4]||(e[4]=a=>r(t).email=a),icon:r(E),type:"email",placeholder:"Correo electrónico",required:""},null,8,["modelValue","icon"])]),_:1},8,["error"]),o(n,{required:"",textClass:"dark:text-white",label:"Contraseña:",help:"Por favor, introduce una contraseña",error:r(t).errors.password},{default:s(()=>[o(d,{modelValue:r(t).password,"onUpdate:modelValue":e[5]||(e[5]=a=>r(t).password=a),icon:r(x),type:"password",placeholder:"Contraseña",required:""},null,8,["modelValue","icon"])]),_:1},8,["error"]),o(n,{required:"",textClass:"dark:text-white",label:"Confirmar contraseña:",help:"Las contraseñas deben coincidir",error:r(t).errors.password_confirmation},{default:s(()=>[o(d,{modelValue:r(t).password_confirmation,"onUpdate:modelValue":e[6]||(e[6]=a=>r(t).password_confirmation=a),icon:r(x),type:"password",placeholder:"Confirmar contraseña",required:""},null,8,["modelValue","icon"])]),_:1},8,["error"]),o(n,{required:"",textClass:"dark:text-white",label:"Programa de Estudio:"},{default:s(()=>[o(d,{modelValue:r(t).selectedArea,"onUpdate:modelValue":e[7]||(e[7]=a=>r(t).selectedArea=a),options:r(b)},null,8,["modelValue","options"])]),_:1}),o(n,{textClass:"dark:text-white",required:"",label:"Área prioritaria:",error:r(t).errors.knowledge_area_id},{default:s(()=>[o(d,{modelValue:r(t).knowledge_area_id,"onUpdate:modelValue":e[8]||(e[8]=a=>r(t).knowledge_area_id=a),options:f.value},null,8,["modelValue","options"])]),_:1},8,["error"]),o(n,{required:"",label:"Institución (en caso de no estar registrada, contactar a citca@cenidet.tecnm.mx):",error:r(t).errors.institution_id,class:"dark:text-white"},{default:s(()=>[o(T,{placeholder:"Busca su institución de procedencia",modelValue:r(t).institution_id,"onUpdate:modelValue":e[9]||(e[9]=a=>r(t).institution_id=a),required:"",options:m.value,onSearch:k},null,8,["modelValue","options"])]),_:1},8,["error"]),o(S,{class:"mt-6"},{default:s(()=>[o(g,{class:R(["w-full",{"opacity-25":r(t).processing}]),type:"submit",color:"info",label:"Crear una cuenta",procesing:r(t).processing},null,8,["class","procesing"])]),_:1})]),_:1})])]),_:1})]),_:1})],64))}};export{ge as default};
