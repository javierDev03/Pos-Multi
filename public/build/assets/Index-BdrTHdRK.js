import{Q as I,c as z,r as $,m as j,p as L,o as r,a as s,b as l,d as f,F as v,u as i,h as u,l as E,t as d,j as p,e,n as M,v as D,f as F,g as U,q as Q,s as w}from"./app-DdNFHAqW.js";import{_ as G}from"./CardBox-CmyBJRt6.js";import{_ as H}from"./LayoutMain-BsSCxfDS.js";import{_ as J,u as N}from"./SectionTitleLineWithButton-PkwI0osh.js";import{f as K,e as C,g as W,h as X,m as Y,i as ee,d as te,j as ae}from"./colors-inGVzw7t.js";import{_ as O}from"./NotificationBar-CTYPL220.js";import{_ as g}from"./BaseButton-sgO_vKHC.js";import{_ as B}from"./BaseButtons-D7HU0kj1.js";import{C as re}from"./CardBoxComponentEmpty-CtyqEEwp.js";import{_ as y,l as le,P as oe}from"./DropdownTable-CJPim1IW.js";import{L as ie}from"./index-B423c0q9.js";import{_ as se}from"./HeadLogo-B8dNSx1m.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./main-B-O7UoXT.js";import"./BaseDivider-CbK6y6pu.js";import"./BaseLevel-CxVnqDyr.js";const ne={class:"flex flex-col md:flex-row justify-between items-center"},de={class:"flex w-full md:w-1/2 mr-1 my-4"},ce={key:0,class:"text-sm"},ue={key:1},me={"data-label":"Identificador"},fe={"data-label":"Titulo"},pe={"data-label":"Tipo"},ge={"data-label":"Programa_Estudio"},ye={"data-label":"Area"},he={key:0,"data-label":"Estatus de evaluación"},be={key:0,class:"dark:bg-green-800 dark:text-green-200 bg-green-100 rounded-full text-green-500 px-2 dark:opacity-95 opacity-85 w-max text-center"},ke={key:0,class:"dark:bg-yellow-800 dark:text-yellow-200 bg-yellow-100 rounded-full text-yellow-500 px-2 dark:opacity-95 opacity-85 w-max text-center"},xe={key:1,"data-label":"Estatus"},ve={"data-label":"Comprobante"},we={"data-label":"Acciones"},_e={class:"vl-parent"},je={__name:"Index",props:{name:"Index",title:{type:String,required:!0},articles:{type:Object,default:()=>({}),required:!0},isReviewer:{type:Boolean,required:!0},routeName:{type:String,required:!0},search:{type:String,required:!0},direction:{type:String,required:!0}},setup(o){const Z=I(),P=["Admin","Editor","Revisor","Admin-Revista"],S=z(()=>{var a,t;return(((t=(a=Z.props.auth)==null?void 0:a.user)==null?void 0:t.roles)??[]).some(k=>P.includes(k.name))}),c=o,x=$(c.search),h=$(!1),b=j({filters:{search:x,order:c.articles.order??"created_at",direction:c.direction}}),_=()=>{w.get(route(`${c.routeName}index`,b.filters,{replace:!0}))},T=()=>{h.value=!0,w.get(route(`${c.routeName}index`))},R=(n,a)=>{b.filters.order=n,b.filters.direction=a,h.value=!0,w.get(route(`${c.routeName}index`,b.filters))},q=()=>{window.open(route(`${c.routeName}export`),"_blank")},m=[{label:"Identificador",key:"folio",menu:[{title:"Ordenar desde A - Z",direction:"asc"},{title:"Ordenar desde Z - A",direction:"desc"}]},{label:"Titulo",key:"title",menu:[{title:"Ordenar desde A - Z",direction:"asc"},{title:"Ordenar desde Z - A",direction:"desc"}]},{label:"Tipo",key:"type",menu:[{title:"Ordenar desde A - Z",direction:"asc"},{title:"Ordenar desde Z - A",direction:"desc"}]},{label:"Programa_Estudio",key:"program",menu:[{title:"Ordenar desde A - Z",direction:"asc"},{title:"Ordenar desde Z - A",direction:"desc"}]},{label:"Area_Prioritaria",key:"area",menu:[{title:"Ordenar desde A - Z",direction:"asc"},{title:"Ordenar desde Z - A",direction:"desc"}]},{label:"Estatus",key:"status",menu:[{title:"Ordenar desde A - Z",direction:"asc"},{title:"Ordenar desde Z - A",direction:"desc"}]}],V=n=>{if(N("article.update")){const a=c.articles.data.find(t=>(t==null?void 0:t.id)===n);if(a.isPostulant&&a.status.can_edit)return!0}return!1};return L("filterBy",R),(n,a)=>(r(),s(v,null,[l(se,{title:o.title},null,8,["title"]),l(H,null,{default:f(()=>[l(J,{icon:i(K),title:o.title,main:""},null,8,["icon","title"]),n.$page.props.flash.success?(r(),u(O,{key:0,color:"success",icon:i(C),outline:!1},{default:f(()=>[E(d(n.$page.props.flash.success),1)]),_:1},8,["icon"])):p("",!0),n.$page.props.flash.error?(r(),u(O,{key:1,color:"danger",icon:i(C),outline:!1},{default:f(()=>[E(d(n.$page.props.flash.error),1)]),_:1},8,["icon"])):p("",!0),e("form",{onSubmit:F(_,["prevent"]),class:"w-full mb-5"},[e("div",ne,[e("div",de,[M(e("input",{type:"search",id:"search-dropdown",class:"block pr-10 md:h-11 w-full z-20 text-sm text-gray-900 bg-gray-50 rounded-l-lg md:border-l-gray-300 border-l-gray-300 border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-l-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:border-blue-500",placeholder:"Ingresa un parametro de busqueda","onUpdate:modelValue":a[0]||(a[0]=t=>x.value=t)},null,512),[[D,x.value]]),l(g,{class:"relative z-30 right-0 h-11 rounded-none",onClick:_,icon:i(W),color:"info",title:"Buscar"},null,8,["icon"]),l(g,{class:"relative right-0 h-11 rounded-l-none rounded-r-lg",onClick:T,icon:i(X),color:"lightDark",title:"Limpiar filtro"},null,8,["icon"])]),l(B,{class:"flex space-x-2 w-full max-w-sm"},{default:f(()=>[i(N)("article.store")?(r(),u(g,{key:0,routeName:`${o.routeName}create`,color:"info",icon:i(Y),label:"Agregar artículo",class:"flex-1 h-11 rounded-l-lg"},null,8,["routeName","icon"])):p("",!0),S.value?(r(),u(g,{key:1,icon:i(ee),color:"success",label:"Exportar Excel",onClick:q,class:"flex-1 h-11 rounded-r-lg"},null,8,["icon"])):p("",!0)]),_:1})])],32),o.articles.data.length>0?(r(),u(G,{key:2},{default:f(()=>[e("table",null,[e("thead",null,[e("tr",null,[a[2]||(a[2]=e("th",null,null,-1)),e("th",null,[l(y,{title:"Identificador",options:m})]),e("th",null,[l(y,{title:"Titulo",options:m})]),e("th",null,[l(y,{title:"Tipo",options:m})]),e("th",null,[l(y,{title:"Programa_Estudio",options:m})]),e("th",null,[l(y,{title:"Area_Prioritaria",options:m})]),o.isReviewer?(r(),s("th",ce,"Estatus de evaluación")):(r(),s("th",ue,[l(y,{title:"Estatus",options:m})])),a[3]||(a[3]=e("th",null,"Comprobante",-1)),a[4]||(a[4]=e("th",{class:"relative inline-block text-left"},[e("span",{class:"inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white dark:bg-gray-700 px-3 py-2 text-sm font-bold text-gray-900 dark:text-white ring-inset ring-gray-300 hover:bg-gray-100"}," Acciones ")],-1))])]),e("tbody",null,[(r(!0),s(v,null,U(o.articles.data,t=>{var k,A;return r(),s("tr",{key:t.id},[a[5]||(a[5]=e("td",{class:"align-items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-book-half",viewBox:"0 0 16 16"},[e("path",{d:"M8.5 2.687c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"})])],-1)),e("td",me,d(t.folio),1),e("td",fe,d(i(le)(t.title,50)),1),e("td",pe,d(((k=t.article_type)==null?void 0:k.name)??"Sin tipo"),1),e("td",ge,d(t.program),1),e("td",ye,d(t.area),1),o.isReviewer?(r(),s("td",he,[t.statusReviewer?(r(),s("div",be," Evaluado ")):(r(),s(v,{key:1},[t.statusReviewer?p("",!0):(r(),s("div",ke," Pendiente de evaluar "))],64))])):(r(),s("td",xe,[e("div",{class:Q(t.status.class)},d(t.status.name),3)])),e("td",ve,d((A=t.paymentVoucherStatus)==null?void 0:A.name),1),e("td",we,[l(B,null,{default:f(()=>[V(t.id)?(r(),u(g,{key:0,color:"info",icon:i(te),small:"",routeName:`${o.routeName}edit`,parameter:t.id,title:"Editar artículo"},null,8,["icon","routeName","parameter"])):p("",!0),l(g,{color:"info",icon:i(ae),iconSize:"22",small:"",routeName:`${o.routeName}show`,parameter:t.id,title:"Ver artículo"},null,8,["icon","routeName","parameter"])]),_:2},1024)])])}),128))])])]),_:1})):(r(),u(re,{key:3})),l(oe,{links:o.articles.links,total:o.articles.total,to:o.articles.to,from:o.articles.from},null,8,["links","total","to","from"]),e("div",_e,[l(i(ie),{active:h.value,"onUpdate:active":a[1]||(a[1]=t=>h.value=t),"can-cancel":!1,"is-full-page":!0},null,8,["active"])])]),_:1})],64))}};export{je as default};
