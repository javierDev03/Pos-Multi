import{x,T as V,c as y,o as p,a as f,e as s,b as t,u as e,d as n,K as U,f as C,b2 as I,j as k}from"./app-C8VQvZ0f.js";import{c as w,q as E,p as j,I as N,ac as S,b as R}from"./colors-CEsUPgXD.js";import{_ as $}from"./InputError-XlLNAwgH.js";import{_ as c}from"./FormField-bCdG-tNU.js";import{_ as m}from"./FormControl-haua1sQz.js";import{_}from"./BaseButton-D751zZDp.js";import"./sweetalert2.esm.all-BccGxJ0c.js";/* empty css                        */import"./main-C82n4mBH.js";const A={class:"md:flex md:space-x-4 mb-5"},B={class:"md:w-1/4 max-lg:mb-5"},F=["src"],G={class:"mt-2 flex space-x-2"},P={class:"md:w-3/4"},T={class:"md:flex md:space-x-4"},L={class:"flex items-center gap-4"},q={key:0,class:"text-sm text-gray-600"},Y={__name:"UpdateProfileInformationForm",setup(D){var u;const i=x("user"),d=i.roles.map(a=>a.name),o=V({_method:"patch",id:i.id,name:i.name,email:i.email,institution:((u=i.institution)==null?void 0:u.name)??"Sin registro",photo:null}),h=y(()=>o.photo!==null?URL.createObjectURL(o.photo):i.file?i.file.path:"img/user.jpg"),b=a=>{o.photo=a.target.files[0]},g=()=>{o.post(route("profile.update"),{onError:a=>{console.log("error: ",a)}})},v=()=>{o.delete(route("profile.destroyPhoto"),{onError:a=>{console.log("error: ",a)}})};return(a,l)=>(p(),f("section",null,[l[5]||(l[5]=s("header",null,[s("h2",{class:"text-lg font-medium text-gray-900 dark:text-slate-100"},"Información personal"),s("p",{class:"mt-1 text-sm text-gray-600 dark:text-slate-400"}," Actualice la información del perfil y la dirección de correo electrónico de su cuenta. ")],-1)),s("form",{onSubmit:l[4]||(l[4]=C((...r)=>a.saveUser&&a.saveUser(...r),["prevent"])),class:"mt-6 space-y-6"},[s("div",A,[s("div",B,[s("img",{id:"photo",src:h.value,class:"rounded w-full h-60 object-cover"},null,8,F),s("div",G,[t(m,{onInput:b,type:"file",height:"h-10.5"}),t(_,{class:"w-1/4",icon:e(w),color:"danger",onClick:v},null,8,["icon"])]),t($,{message:e(o).errors.photo},null,8,["message"])]),s("div",P,[t(c,{label:"Nombre completo:",error:e(o).errors.name},{default:n(()=>[t(m,{icon:e(E),modelValue:e(o).name,"onUpdate:modelValue":l[0]||(l[0]=r=>e(o).name=r),placeholder:"Nombre completo",disabled:""},null,8,["icon","modelValue"])]),_:1},8,["error"]),t(c,{label:"Correo Electrónico:",error:e(o).errors.email},{default:n(()=>[t(m,{modelValue:e(o).email,"onUpdate:modelValue":l[1]||(l[1]=r=>e(o).email=r),icon:e(j),placeholder:"Correo Electrónico",disabled:""},null,8,["modelValue","icon"])]),_:1},8,["error"]),t(c,{label:"Institución:",error:e(o).errors.institution_id},{default:n(()=>[t(m,{modelValue:e(o).institution,"onUpdate:modelValue":l[2]||(l[2]=r=>e(o).institution=r),icon:e(N),placeholder:"Institución de procedencia",disabled:""},null,8,["modelValue","icon"])]),_:1},8,["error"])])]),s("div",T,[t(c,{class:"w-full",label:"Rol en el sistema:"},{default:n(()=>[t(m,{disabled:"",modelValue:e(d),"onUpdate:modelValue":l[3]||(l[3]=r=>I(d)?d.value=r:null),icon:e(S)},null,8,["modelValue","icon"])]),_:1})]),s("div",L,[t(_,{title:"Guardar",onClick:g,icon:e(R),color:"success",label:"Guardar foto"},null,8,["icon"]),t(U,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:n(()=>[e(o).recentlySuccessful?(p(),f("p",q,"Guardado.")):k("",!0)]),_:1})])],32)]))}};export{Y as default};
