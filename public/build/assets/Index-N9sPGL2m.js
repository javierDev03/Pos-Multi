import{Q as V,c as j,r as w,m as I,p as L,o as i,a as u,b as r,d,F as _,u as o,h as m,l as $,t as c,j as x,e,n as M,v as z,f as P,g as Z,s as k}from"./app-C8VQvZ0f.js";import{_ as R}from"./CardBox-D-3MIlS4.js";import{_ as U}from"./LayoutMain-ZFijm9Gj.js";import{_ as Q}from"./SectionTitleLineWithButton-CORxjxXV.js";import{f as G,e as N,g as H,h as J,m as K,i as W,d as X}from"./colors-CEsUPgXD.js";import{_ as A}from"./NotificationBar-BzVJ0lcM.js";import{_ as f}from"./BaseButton-D751zZDp.js";import{_ as B}from"./BaseButtons-BYm_JhLH.js";import{C as Y}from"./CardBoxComponentEmpty-DJHEVF5S.js";import{l as C,P as ee}from"./Pagination-rNIBrX6v.js";import{L as te}from"./index-DM3TS9yR.js";import"./index-CrnjeDyq.js";import{_ as y}from"./DropdownTable-BAtOQMZU.js";import"./_baseGetTag-zIT0YVv4.js";import{_ as re}from"./HeadLogo-BA8DlMdf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./main-C82n4mBH.js";import"./BaseDivider-ugWBZYPJ.js";import"./BaseLevel-vlIqV0r8.js";const ae={class:"flex flex-col md:flex-row justify-between"},le={class:"flex w-full md:w-1/2 mr-1 my-4"},oe={"data-label":"Título"},ie={"data-label":"Descripción"},ne={"data-label":"Fecha de inicio"},se={"data-label":"Fecha fin"},de={"data-label":"Estatus"},ce={key:0,class:"dark:bg-green-800 dark:text-green-200 bg-green-100 rounded-sm text-green-500 px-4 dark:opacity-95 opacity-85 w-min"},ue={key:1,class:"dark:text-red-500 bg-red-100 rounded-sm text-red-500 px-4 dark:opacity-55 opacity-85 w-min"},me={"data-label":"Acciones"},fe={class:"vl-parent"},Te={__name:"Index",props:{name:"Index",title:{type:String,required:!0},calls:{type:Object,default:()=>({}),required:!0},routeName:{type:String,required:!0},search:{type:String,required:!0},direction:{type:String,required:!0}},setup(l){const E=V(),F=["Admin","Editor","Revisor"],O=j(()=>{var t,a;return(((a=(t=E.props.auth)==null?void 0:t.user)==null?void 0:a.roles)??[]).some(D=>F.includes(D.name))}),n=l,b=w(n.search),p=w(!1),g=I({filters:{search:b,order:n.calls.order??"created_at",direction:n.direction}}),v=()=>{k.get(route(`${n.routeName}index`,g.filters,{replace:!0}))},S=()=>{p.value=!0,k.get(route(`${n.routeName}index`))},T=()=>{window.open(route(`${n.routeName}export`),"_blank")},q=(s,t)=>{g.filters.order=s,g.filters.direction=t,p.value=!0,k.get(route(`${n.routeName}index`,g.filters))},h=[{label:"Título",key:"title",menu:[{title:"Ordenar desde A - Z ",direction:"asc"},{title:"Ordenar desde Z - A ",direction:"desc"}]},{label:"Descripción",key:"description",menu:[{title:"Ordenar desde A - Z ",direction:"asc"},{title:"Ordenar desde Z - A ",direction:"desc"}]},{label:"Fecha de inicio",key:"start_date",menu:[{title:"Ordenar reciente ",direction:"asc"},{title:"Ordenar antiguo ",direction:"desc"}]},{label:"Fecha fin",key:"start_date",menu:[{title:"Ordenar reciente ",direction:"asc"},{title:"Ordenar antiguo ",direction:"desc"}]}];return L("filterBy",q),(s,t)=>(i(),u(_,null,[r(re,{title:l.title},null,8,["title"]),r(U,null,{default:d(()=>[r(Q,{icon:o(G),title:l.title,main:""},null,8,["icon","title"]),s.$page.props.flash.success?(i(),m(A,{key:0,color:"success",icon:o(N),outline:!1},{default:d(()=>[$(c(s.$page.props.flash.success),1)]),_:1},8,["icon"])):x("",!0),s.$page.props.flash.error?(i(),m(A,{key:1,color:"danger",icon:o(N),outline:!1},{default:d(()=>[$(c(s.$page.props.flash.error),1)]),_:1},8,["icon"])):x("",!0),e("form",{onSubmit:P(v,["prevent"]),class:"w-full mb-5"},[e("div",ae,[e("div",le,[M(e("input",{type:"search",id:"search-dropdown",class:"block pr-10 md:h-11 w-full z-20 text-sm text-gray-900 bg-gray-50 rounded-l-lg md:border-l-gray-300 border-l-gray-300 border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-l-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:border-blue-500",placeholder:"Ingresa un parametro de busqueda","onUpdate:modelValue":t[0]||(t[0]=a=>b.value=a)},null,512),[[z,b.value]]),r(f,{class:"relative z-30 right-0 h-11 rounded-none",onClick:v,icon:o(H),color:"info",title:"Buscar"},null,8,["icon"]),r(f,{class:"relative right-0 h-11 rounded-l-none rounded-r-lg",onClick:S,icon:o(J),color:"lightDark",title:"Limpiar filtro"},null,8,["icon"])]),r(B,{class:"flex space-x-2"},{default:d(()=>[r(f,{routeName:`${l.routeName}create`,color:"info",icon:o(K),label:"Agregar convocatoria",class:"flex-1 h-11 rounded-l-lg"},null,8,["routeName","icon"]),O.value?(i(),m(f,{key:0,icon:o(W),color:"success",label:"Exportar a Excel",onClick:T,class:"flex-1 h-11 rounded-r-lg"},null,8,["icon"])):x("",!0)]),_:1})])],32),l.calls.data.length>0?(i(),m(R,{key:2},{default:d(()=>[e("table",null,[e("thead",null,[e("tr",null,[t[2]||(t[2]=e("th",null,null,-1)),e("th",null,[r(y,{title:"Título",options:h})]),e("th",null,[r(y,{title:"Descripción",options:h})]),e("th",null,[r(y,{title:"Fecha de inicio",options:h})]),e("th",null,[r(y,{title:"Fecha fin",options:h})]),t[3]||(t[3]=e("th",null,[e("span",{class:"inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white dark:bg-gray-700 px-3 py-2 text-md font-bold text-gray-900 dark:text-white ring-inset ring-gray-300 hover:bg-gray-100"}," Estatus ")],-1)),t[4]||(t[4]=e("th",{class:"relative inline-block text-left"},[e("span",{class:"inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white dark:bg-gray-700 px-3 py-2 text-md font-bold text-gray-900 dark:text-white ring-inset ring-gray-300 hover:bg-gray-100"}," Acciones ")],-1))])]),e("tbody",null,[(i(!0),u(_,null,Z(l.calls.data,a=>(i(),u("tr",{key:a.id},[t[5]||(t[5]=e("td",{class:"align-items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-book-half",viewBox:"0 0 16 16"},[e("path",{d:"M8.5 2.687c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"})])],-1)),e("td",oe,c(o(C)(a.title,50)),1),e("td",ie,c(o(C)(a.description,50)),1),e("td",ne,c(a.start_date),1),e("td",se,c(a.end_date),1),e("td",de,[a.status?(i(),u("div",ce," Activo ")):(i(),u("div",ue," Inactivo "))]),e("td",me,[r(B,null,{default:d(()=>[r(f,{color:"info",icon:o(X),small:"",routeName:`${l.routeName}edit`,parameter:a.id,title:"Editar convocatoria"},null,8,["icon","routeName","parameter"])]),_:2},1024)])]))),128))])])]),_:1})):(i(),m(Y,{key:3})),r(ee,{links:l.calls.links,total:l.calls.total,to:l.calls.to,from:l.calls.from},null,8,["links","total","to","from"]),e("div",fe,[r(o(te),{active:p.value,"onUpdate:active":t[1]||(t[1]=a=>p.value=a),"can-cancel":!1,"is-full-page":!0},null,8,["active"])])]),_:1})],64))}};export{Te as default};
