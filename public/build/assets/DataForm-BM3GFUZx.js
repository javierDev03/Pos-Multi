import{g as q}from"./colors-CEsUPgXD.js";import{_ as N}from"./InputError-XlLNAwgH.js";import{x,r as f,w as P,z as $,o as _,a as b,e as l,b as s,u as o,d as n,F as k,k as C,g as L,t as V}from"./app-C8VQvZ0f.js";import{_ as i}from"./FormField-bCdG-tNU.js";import{_ as u}from"./FormControl-haua1sQz.js";import{_ as M}from"./BaseButton-D751zZDp.js";import{_ as F}from"./Select-CVkdm-Ju.js";import{L as I}from"./index-DM3TS9yR.js";import{S as U}from"./sweetalert2.esm.all-BccGxJ0c.js";/* empty css                        */import"./main-C82n4mBH.js";import"./_baseGetTag-zIT0YVv4.js";const O={class:"vl-parent"},z={class:"md:w-1/2 mb-5"},T={class:"md:flex md:space-x-1 mb-1 mt-2"},j={class:"md:w-full max-lg:mb-5"},G={class:"max-lg:mb-5 my-auto"},H={class:"md:flex md:space-x-4 mb-5"},J={class:"md:w-1/2 max-lg:mb-5"},K={class:"md:w-1/2"},Q={class:"mb-5"},W={"data-label":"Nombre"},X={"data-label":"Descripción"},Y={"data-label":"Estatus"},Z={class:"p-2 inline-flex items-center cursor-pointer"},ee=["value","id","checked","onChange"],te={class:"md:flex md:space-x-4 my-5"},le={class:"md:w-1/2 max-lg:mb-5"},ae={class:"md:w-1/2"},be={__name:"DataForm",props:{name:"DataForm",canEdit:{type:Boolean,default:!1,required:!1}},setup(y){const t=x("form"),d=x("propsData"),c=f(!1),B=d.areas.filter(r=>r.parent_id===null)??[],g=f([]),A=r=>t.roles.includes(r.id),R=r=>{const e=t.roles.indexOf(r.id);e===-1?t.roles.push(r.id):t.roles.splice(e,1)},m=f(null),D=r=>{C.get(route("institution.filter",r)).then(e=>{m.value=e.data,console.log(m)}).catch(function(e){e.response&&e.response.status==500&&U.fire({title:"ERRO!",text:"Error",icon:"info",confirmButtonColor:"#3085d6",confirmButtonText:"Ok!"})})},E=()=>{c.value=!0,C.get(route("user.getCurp",t.curp.toUpperCase())).then(r=>{c.value=!1;const e=r.data.dataCurp;t.name=e.nombres.toUpperCase()+" "+e.apellidoPaterno.toUpperCase()+" "+e.apellidoMaterno.toUpperCase()}).catch(function(r){r.response&&r.response.status==500&&U.fire({title:"CURP Incorrecta!",text:"La CURP ingresada no es valida, intente nuevamente",icon:"info",confirmButtonColor:"#3085d6",confirmButtonText:"Ok!"}),t.reset("name"),c.value=!1})},v=()=>{var r,e;t.selectedArea!==((e=(r=d.user)==null?void 0:r.knowledge_area)==null?void 0:e.parent_id)&&(t.knowledge_area_id=null),g.value=d.areas.filter(a=>a.parent_id===t.selectedArea)};return P(()=>t.selectedArea,v),$(()=>{v()}),(r,e)=>(_(),b(k,null,[l("div",O,[s(o(I),{active:c.value,"onUpdate:active":e[0]||(e[0]=a=>c.value=a),"can-cancel":!1,"is-full-page":!0},null,8,["active"])]),l("div",z,[e[9]||(e[9]=l("label",{class:"font-bold"},"CURP:",-1)),l("div",T,[l("div",j,[s(u,{placeholder:"Ingresa CURP",modelValue:o(t).curp,"onUpdate:modelValue":e[1]||(e[1]=a=>o(t).curp=a),maxlength:"18"},null,8,["modelValue"])]),l("div",G,[s(M,{class:"w-full",label:"Buscar CURP",color:"info",icon:o(q),onClick:e[2]||(e[2]=a=>E())},null,8,["icon"])])]),s(N,{class:"mb-5",message:o(t).errors.curp},null,8,["message"])]),l("div",H,[l("div",J,[s(i,{label:"Nombre del usuario:",required:!0,error:o(t).errors.name},{default:n(()=>[s(u,{modelValue:o(t).name,"onUpdate:modelValue":e[3]||(e[3]=a=>o(t).name=a),placeholder:"Nombre del usuario"},null,8,["modelValue"])]),_:1},8,["error"])]),l("div",K,[s(i,{label:"Correo Electrónico:",required:!0,error:o(t).errors.email},{default:n(()=>[s(u,{modelValue:o(t).email,"onUpdate:modelValue":e[4]||(e[4]=a=>o(t).email=a),type:"email",placeholder:"Correo Electrónico"},null,8,["modelValue"])]),_:1},8,["error"])])]),s(i,{label:y.canEdit?"Nueva contraseña:":"Contraseña:",required:!0,error:o(t).errors.password},{default:n(()=>[s(u,{modelValue:o(t).password,"onUpdate:modelValue":e[5]||(e[5]=a=>o(t).password=a),placeholder:"Contraseña",type:"password"},null,8,["modelValue"])]),_:1},8,["label","error"]),s(i,{label:"Selecciona un rol:",required:!0,help:"Puedes asignarle uno o más roles al usuario"},{default:n(()=>[l("table",Q,[e[12]||(e[12]=l("thead",null,[l("tr",null,[l("th"),l("th",null,"Nombre de Rol"),l("th",null,"Descripción"),l("th",null,"Estatus")])],-1)),l("tbody",null,[(_(!0),b(k,null,L(o(d).roles,a=>(_(),b("tr",{key:a.id},[e[11]||(e[11]=l("td",{class:"align-items-center"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-book-half",viewBox:"0 0 16 16"},[l("path",{d:"M8.5 2.687c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"})])],-1)),l("td",W,V(a.name),1),l("td",X,V(a.description),1),l("td",Y,[l("label",Z,[l("input",{type:"checkbox",class:"sr-only peer",value:{id:a.id},id:"role_"+a.id,checked:A(a),onChange:p=>R(a)},null,40,ee),e[10]||(e[10]=l("div",{class:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])])]))),128))])])]),_:1}),l("div",te,[l("div",le,[s(i,{label:"Area de conocimiento:"},{default:n(()=>[s(u,{modelValue:o(t).selectedArea,"onUpdate:modelValue":e[6]||(e[6]=a=>o(t).selectedArea=a),options:o(B)},null,8,["modelValue","options"])]),_:1})]),l("div",ae,[s(i,{label:"SubArea:",error:o(t).errors.knowledge_area_id},{default:n(()=>[s(u,{modelValue:o(t).knowledge_area_id,"onUpdate:modelValue":e[7]||(e[7]=a=>o(t).knowledge_area_id=a),options:g.value},null,8,["modelValue","options"])]),_:1},8,["error"])])]),s(i,{required:"",label:"Institución:",error:o(t).errors.institution_id,class:"dark:text-white"},{default:n(()=>{var a,p,h,w;return[s(F,{placeholder:"Busca una institución",itemSelected:((p=(a=o(d))==null?void 0:a.user)==null?void 0:p.institution)!=null?(w=(h=o(d))==null?void 0:h.user)==null?void 0:w.institution:null,modelValue:o(t).institution_id,"onUpdate:modelValue":e[8]||(e[8]=S=>o(t).institution_id=S),required:"",options:m.value,onSearch:D},null,8,["itemSelected","modelValue","options"])]}),_:1},8,["error"])],64))}};export{be as default};
