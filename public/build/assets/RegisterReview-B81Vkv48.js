import{r as p,T as U,w as q,o as h,a as R,e as i,b as o,u as t,d as s,F as $,f as P,q as y,k as _}from"./app-DdNFHAqW.js";import{g as A,r as B,q as E,s as x}from"./colors-inGVzw7t.js";import{_ as L,a as I}from"./SectionFullScreen--Gtz-0wI.js";import{_ as N}from"./CardBox-CmyBJRt6.js";import{_ as O}from"./FormValidationErrors-CxJ7PVHl.js";import{_ as n}from"./FormField-CILI8Nf7.js";import{_ as d}from"./FormControl-bDY0Yb_I.js";import{_ as g}from"./BaseButton-sgO_vKHC.js";import{_ as S}from"./BaseButtons-D7HU0kj1.js";import{_ as M}from"./Select-BJN33FS9.js";import{L as T}from"./index-B423c0q9.js";import{S as w}from"./sweetalert2.esm.all-BccGxJ0c.js";/* empty css                        */import{_ as D}from"./InputError-B-EUtzjq.js";import"./lodash-DkZ3wxhl.js";import{_ as F}from"./HeadLogo-B8dNSx1m.js";import"./Navbar-CwLcd33U.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./flowbite-vue-B3Oz5FTX.js";import"./main-B-O7UoXT.js";import"./_baseGetTag-Ddn2H9e8.js";const j={class:"vl-parent"},z={class:"w-[650px] mx-auto py-10"},G={class:"mb-5"},H={class:"md:flex md:space-x-1 mb-1 mt-2"},J={class:"md:w-full max-lg:mb-5"},K={class:"max-lg:mb-5 my-auto"},ge={__name:"RegisterReview",props:{areas:{type:Object,required:!0,default:{}}},setup(b){const c=b,C=c.areas.filter(l=>l.parent_id===null)??[],f=p([]),r=U({curp:null,name:null,email:null,password:null,password_confirmation:null,knowledge_area_id:null,institution_id:null,selectedArea:null}),u=p(!1),v=()=>{r.post(route("registerReview.storeRevisores"))},V=()=>{u.value=!0,_.get(route("user.getCurp",r.curp.toUpperCase())).then(l=>{u.value=!1;const e=l.data.dataCurp;r.name=e.nombres.toUpperCase()+" "+e.apellidoPaterno.toUpperCase()+" "+e.apellidoMaterno.toUpperCase()}).catch(function(l){l.response&&l.response.status==500&&w.fire({title:"CURP Incorrecta!",text:"La CURP ingresada no es valida, intente nuevamente",icon:"info",confirmButtonColor:"#3085d6",confirmButtonText:"Ok!"}),r.reset("name"),u.value=!1})},m=p(null),k=l=>{_.get(route("institution.filter",l)).then(e=>{m.value=e.data,console.log(m)}).catch(function(e){e.response&&e.response.status==500&&w.fire({title:"ERRO!",text:"Error",icon:"info",confirmButtonColor:"#3085d6",confirmButtonText:"Ok!"})})};return q(()=>r.selectedArea,()=>{r.knowledge_area_id=null,f.value=c.areas.filter(l=>l.parent_id===r.selectedArea)}),(l,e)=>(h(),R($,null,[i("div",j,[o(t(T),{active:u.value,"onUpdate:active":e[0]||(e[0]=a=>u.value=a),"can-cancel":!1,"is-full-page":!0},null,8,["active"])]),o(F,{title:"Registro"}),o(L,null,{default:s(()=>[o(I,{bg:"white"},{default:s(()=>[i("div",z,[o(N,{rounded:"rounded-lg",padding:"p-6","is-form":"",onSubmit:P(v,["prevent"])},{default:s(()=>[e[11]||(e[11]=i("h1",{class:"mb-4 text-center text-2xl lg:text-3xl font-bold dark:text-white"}," Registro para revisores de artículos ",-1)),o(O,{class:"mt-4"}),i("div",G,[e[10]||(e[10]=i("label",{class:"font-bold dark:text-white"},"CURP:",-1)),i("div",H,[i("div",J,[o(d,{textClass:"dark:text-white",placeholder:"Ingresa CURP",modelValue:t(r).curp,"onUpdate:modelValue":e[1]||(e[1]=a=>t(r).curp=a),maxlength:"18"},null,8,["modelValue"])]),i("div",K,[o(g,{class:"w-full",label:"Buscar CURP",color:"info",icon:t(A),onClick:e[2]||(e[2]=a=>V())},null,8,["icon"])])]),o(D,{class:"mb-5",message:t(r).errors.curp},null,8,["message"])]),o(n,{required:"",textClass:"dark:text-white",label:"Nombre completo:",help:"Por favor, introduce tu nombre completo",error:t(r).errors.name},{default:s(()=>[o(d,{modelValue:t(r).name,"onUpdate:modelValue":e[3]||(e[3]=a=>t(r).name=a),icon:t(B),placeholder:"Nombre completo",required:""},null,8,["modelValue","icon"])]),_:1},8,["error"]),o(n,{required:"",textClass:"dark:text-white",label:"Correo electrónico:",help:"Por favor, introduce tu email",error:t(r).errors.email},{default:s(()=>[o(d,{modelValue:t(r).email,"onUpdate:modelValue":e[4]||(e[4]=a=>t(r).email=a),icon:t(E),type:"email",placeholder:"Correo electrónico",required:""},null,8,["modelValue","icon"])]),_:1},8,["error"]),o(n,{required:"",textClass:"dark:text-white",label:"Contraseña:",help:"Por favor, introduce una contraseña",error:t(r).errors.password},{default:s(()=>[o(d,{modelValue:t(r).password,"onUpdate:modelValue":e[5]||(e[5]=a=>t(r).password=a),icon:t(x),type:"password",placeholder:"Contraseña",required:""},null,8,["modelValue","icon"])]),_:1},8,["error"]),o(n,{required:"",textClass:"dark:text-white",label:"Confirmar contraseña:",help:"Las contraseñas deben coincidir",error:t(r).errors.password_confirmation},{default:s(()=>[o(d,{modelValue:t(r).password_confirmation,"onUpdate:modelValue":e[6]||(e[6]=a=>t(r).password_confirmation=a),icon:t(x),type:"password",placeholder:"Confirmar contraseña",required:""},null,8,["modelValue","icon"])]),_:1},8,["error"]),o(n,{required:"",textClass:"dark:text-white",label:"Programa de Estudio:"},{default:s(()=>[o(d,{modelValue:t(r).selectedArea,"onUpdate:modelValue":e[7]||(e[7]=a=>t(r).selectedArea=a),options:t(C)},null,8,["modelValue","options"])]),_:1}),o(n,{textClass:"dark:text-white",required:"",label:"Área prioritaria:",error:t(r).errors.knowledge_area_id},{default:s(()=>[o(d,{modelValue:t(r).knowledge_area_id,"onUpdate:modelValue":e[8]||(e[8]=a=>t(r).knowledge_area_id=a),options:f.value},null,8,["modelValue","options"])]),_:1},8,["error"]),o(n,{required:"",label:"Institución (en caso de no estar registrada, contactar a citca@cenidet.tecnm.mx):",error:t(r).errors.institution_id,class:"dark:text-white"},{default:s(()=>[o(M,{placeholder:"Busca su institución de procedencia",modelValue:t(r).institution_id,"onUpdate:modelValue":e[9]||(e[9]=a=>t(r).institution_id=a),required:"",options:m.value,onSearch:k},null,8,["modelValue","options"])]),_:1},8,["error"]),o(S,{class:"mt-6"},{default:s(()=>[o(g,{class:y(["w-full",{"opacity-25":t(r).processing}]),type:"submit",color:"info",label:"Crear una cuenta",procesing:t(r).processing},null,8,["class","procesing"])]),_:1})]),_:1})])]),_:1})]),_:1})],64))}};export{ge as default};
