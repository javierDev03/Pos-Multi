import{b as P}from"./colors-inGVzw7t.js";import{_ as h}from"./FormField-CILI8Nf7.js";import{_ as x}from"./FormControl-bDY0Yb_I.js";import{C as $}from"./CardBoxComponentEmpty-CtyqEEwp.js";import{_ as j}from"./BaseButtons-D7HU0kj1.js";import{_ as N}from"./BaseButton-sgO_vKHC.js";import{x as w,T as S,c as v,r as y,o as d,a as c,e,b as u,d as b,u as a,F as k,g as q,t as p,h as T,q as F,l as U,j as C}from"./app-DdNFHAqW.js";import"./main-B-O7UoXT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"mt-5 grid grid-cols-1 gap-3"},D={class:"lg:mb-5"},M={class:"lg:mb-5"},O={class:"lg:mb-5"},G={class:"lg:mb-5 col-span-2"},H={key:0,class:"border rounded border-gray-400"},I={class:"flex flex-col divide-y divide-gray-200"},J={class:"text-sm font-medium text-gray-900 dark:text-gray-300"},K={key:0,class:"ml-2"},Q={key:1,class:"ml-2"},W={class:"text-gray-500 dark:text-gray-400 mt-1 text-xs"},X=["disabled","value","id","checked","onChange"],Y={class:"flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-800"},Z=["disabled"],ee={class:"text-sm"},re=["disabled"],se={class:"col-span-2"},f=10,ve={__name:"Assigns",setup(te){const l=w("props"),g=w("getRole"),o=S({article_id:l.article.id,editor_id:l.article.editor_id,article_status_id:l.article.article_status_id,reviewers:l.article.article_reviews.map(r=>r.reviewer_id)});v(()=>o.reviewers.length);const A=()=>{o.post(route("articleReview.store"))},R=r=>o.reviewers.includes(r.id),V=r=>{const t=o.reviewers.indexOf(r.id);t===-1?o.reviewers.push(r.id):o.reviewers.splice(t,1)},n=y(""),m=v(()=>n.value?l.reviewers.filter(r=>r.name.toLowerCase().includes(n.value.toLowerCase())||r.area&&r.area.toLowerCase().includes(n.value.toLowerCase())||r.subarea&&r.subarea.toLowerCase().includes(n.value.toLowerCase())):l.reviewers),i=y(1),_=v(()=>Math.ceil(m.value.length/f)),L=v(()=>{const r=(i.value-1)*f;return m.value.slice(r,r+f)}),B=()=>{i.value<_.value&&i.value++},E=()=>{i.value>1&&i.value--};return(r,t)=>(d(),c(k,null,[t[4]||(t[4]=e("h2",{class:"text-xl font-medium text-gray-700 dark:text-white py-2"}," Asignar editor y revisores ",-1)),e("div",z,[e("div",D,[e("div",M,[u(h,{required:"",label:"Selecciona un editor:",error:a(o).errors.editor_id},{default:b(()=>[u(x,{disabled:!a(g)(["Admin","Admin-Revista"]),modelValue:a(o).editor_id,"onUpdate:modelValue":t[0]||(t[0]=s=>a(o).editor_id=s),options:a(l).editors},null,8,["disabled","modelValue","options"])]),_:1},8,["error"])]),e("div",O,[u(h,{required:"",label:"Teclea el nombre del revisor o su programa para buscarlo:",error:a(o).errors.reviewers},{default:b(()=>[u(x,{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=s=>n.value=s),placeholder:"Buscar por nombre, área o subárea..."},null,8,["modelValue"])]),_:1},8,["error"])])]),e("div",G,[m.value.length>0?(d(),c("div",H,[e("ul",I,[(d(!0),c(k,null,q(L.value,s=>(d(),c("li",{key:s.id},[e("label",{class:F(["p-2 justify-between flex items-center px-3",{"cursor-not-allowed":!a(g)(["Editor","Admin","Admin-Revista"]),"cursor-pointer":a(g)(["Editor","Admin","Admin-Revista"])}])},[e("span",J,[U(p(s.name)+" ",1),s.area?(d(),c("span",K,"- "+p(s.area),1)):C("",!0),s.subarea?(d(),c("span",Q,"- "+p(s.subarea),1)):C("",!0),e("p",W," Artículos asignados: "+p(s.assigned_count),1)]),e("input",{disabled:!a(g)(["Editor","Admin","Admin-Revista"]),type:"checkbox",class:"sr-only peer",value:s.id,id:"reviewer_"+s.id,checked:R(s),onChange:ae=>V(s)},null,40,X),t[3]||(t[3]=e("div",{class:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))],2)]))),128))]),e("div",Y,[e("button",{onClick:E,disabled:i.value===1,class:"px-3 py-1 text-sm rounded border text-white bg-green-500 hover:bg-green-600 dark:bg-gray-700"}," Anterior ",8,Z),e("span",ee,"Página "+p(i.value)+" de "+p(_.value),1),e("button",{onClick:B,disabled:i.value===_.value,class:"px-3 py-1 text-sm rounded border text-white bg-green-500 hover:bg-green-600 dark:bg-gray-700"}," Siguiente ",8,re)])])):(d(),T($,{key:1}))]),e("div",se,[u(j,{class:"mt-5"},{default:b(()=>[u(N,{disabled:!a(g)(["Editor","Admin","Admin-Revista"]),onClick:t[2]||(t[2]=s=>A()),icon:a(P),color:"success",label:"Asignar",small:""},null,8,["disabled","icon"])]),_:1})])])],64))}};export{ve as default};
