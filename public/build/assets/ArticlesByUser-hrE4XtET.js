import{_ as A}from"./HeadLogo-BA8DlMdf.js";import{b as $,a as B,_ as D}from"./SectionTitleLineWithButton-CORxjxXV.js";import{_ as E,h as V,E as z}from"./jspdf.es.min-C7hkvkyA.js";import{a4 as I}from"./colors-CEsUPgXD.js";import{C as k,r as j}from"./chart-CH8-U_Kh.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as h,z as S,J as T,o as c,a as m,b as d,d as g,F as v,u as q,e as t,l as b,t as l,g as F,q as M}from"./app-C8VQvZ0f.js";import"./main-C82n4mBH.js";import"./BaseDivider-ugWBZYPJ.js";const O={id:"charts-pdf-content",class:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow relative"},U={class:"absolute top-4 right-4 z-10 no-capture"},G={class:"rounded-md bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-md dark:shadow-lg"},R={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},W={class:"bg-blue-50 dark:bg-blue-900 p-4 rounded-lg"},J={class:"text-2xl font-bold text-blue-600 dark:text-blue-100"},L={class:"bg-green-50 dark:bg-green-900 p-4 rounded-lg"},H={class:"text-2xl font-bold text-green-600 dark:text-green-100"},Z={class:"bg-purple-50 dark:bg-purple-900 p-4 rounded-lg"},K={class:"text-2xl font-bold text-purple-600 dark:text-purple-100"},Q={class:"mt-8 overflow-x-auto shadow-md rounded-lg"},X={class:"min-w-full border border-gray-200 dark:border-gray-700"},Y={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700"},tt={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700"},et={class:"bg-gray-100 dark:bg-gray-700 font-semibold"},rt={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700"},at={__name:"ArticlesByUser",props:{users:{type:Array,required:!0,default:()=>[]},totals:{type:Object,required:!0}},setup(o){const n=o;function x(r,e=.5){return`hsla(${r*60%360}, 70%, 70%, ${e})`}k.register(...j);const w=h({labels:n.users.map(r=>r.name),datasets:[{label:"Artículos por Postulante",data:n.users.map(r=>r.articles_count),backgroundColor:n.users.map(r=>x(r.id,.5)),borderColor:n.users.map(r=>x(r.id,1)),borderWidth:1}]}),_=h({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Distribución de Artículos por Postulantes",font:{size:16}},tooltip:{callbacks:{label:function(r){return`Artículos: ${r.raw}`}}}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1,precision:0},title:{display:!0,text:"Cantidad de Artículos"}},x:{title:{display:!0,text:"Postulantes"}}}});let i=null;S(()=>{const r=document.getElementById("articlesChart");r&&(i=new k(r,{type:"bar",data:w.value,options:_.value}))}),T(()=>{i&&(i.destroy(),i=null)});async function u(r="pdf"){try{const e=document.getElementById("charts-pdf-content");if(!e)return;const a=document.querySelectorAll(".no-capture");a.forEach(s=>s.style.visibility="hidden");const C=await V(e,{backgroundColor:null,scale:2,logging:!1,useCORS:!0});a.forEach(s=>s.style.visibility="visible");const p=C.toDataURL(`image/${r==="pdf"?"png":r}`);if(r==="pdf"){const s=new z("p","mm","a4"),y=s.getImageProperties(p),f=s.internal.pageSize.getWidth(),P=y.height*f/y.width;s.addImage(p,"PNG",0,0,f,P),s.save("articulos_por_postulante.pdf")}else{const s=document.createElement("a");s.href=p,s.download=`articulos_por_postulante.${r}`,s.click()}}catch(e){console.error("Error al generar el documento:",e)}}return(r,e)=>(c(),m(v,null,[d(A,{title:"Artículos por postulante"}),d($,null,{default:g(()=>[d(B,null,{default:g(()=>[d(D,{icon:q(I),title:"Artículos Por Postulante",main:""},null,8,["icon"]),t("div",O,[t("div",U,[d(E,null,{trigger:g(()=>e[3]||(e[3]=[t("button",{class:"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 text-sm text-gray-800 dark:text-white px-3 py-2 rounded"}," Opciones ",-1)])),content:g(()=>[t("ul",G,[t("li",null,[t("button",{onClick:e[0]||(e[0]=a=>u("png")),class:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"},e[4]||(e[4]=[t("span",{class:"flex items-center"},[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})]),b(" Descargar PNG ")],-1)]))]),t("li",null,[t("button",{onClick:e[1]||(e[1]=a=>u("jpg")),class:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"},e[5]||(e[5]=[t("span",{class:"flex items-center"},[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})]),b(" Descargar JPG ")],-1)]))]),t("li",null,[t("button",{onClick:e[2]||(e[2]=a=>u("pdf")),class:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"},e[6]||(e[6]=[t("span",{class:"flex items-center"},[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})]),b(" Descargar PDF ")],-1)]))])])]),_:1})]),t("div",R,[t("div",W,[e[7]||(e[7]=t("h3",{class:"text-sm font-medium text-blue-800 dark:text-blue-200"},"Total Postulantes",-1)),t("p",J,l(o.totals.users),1)]),t("div",L,[e[8]||(e[8]=t("h3",{class:"text-sm font-medium text-green-800 dark:text-green-200"},"Total Artículos",-1)),t("p",H,l(o.totals.articles),1)]),t("div",Z,[e[9]||(e[9]=t("h3",{class:"text-sm font-medium text-purple-800 dark:text-purple-200"},"Promedio por Postulante",-1)),t("p",K,l(o.totals.avg_articles_per_user),1)])]),e[13]||(e[13]=t("div",{class:"chart-container dark:text-gray-300",style:{position:"relative",height:"400px",width:"100%"}},[t("canvas",{id:"articlesChart"})],-1)),t("div",Q,[e[12]||(e[12]=t("h2",{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200"},"Datos detallados",-1)),t("table",X,[e[11]||(e[11]=t("thead",{class:"bg-gray-50 dark:bg-gray-800"},[t("tr",null,[t("th",{scope:"col",class:"px-4 sm:px-6 py-3 border-b border-gray-200 dark:border-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Postulante "),t("th",{scope:"col",class:"px-4 sm:px-6 py-3 border-b border-gray-200 dark:border-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Artículos Publicados ")])],-1)),t("tbody",null,[(c(!0),m(v,null,F(o.users,a=>(c(),m("tr",{key:a.id,class:M({"bg-gray-50 dark:bg-gray-700":a.id%2===0,"bg-white dark:bg-gray-800":a.id%2!==0})},[t("td",Y,l(a.name),1),t("td",tt,l(a.articles_count),1)],2))),128)),t("tr",et,[e[10]||(e[10]=t("td",{class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700"}," Total ",-1)),t("td",rt,l(o.totals.articles),1)])])])])])]),_:1})]),_:1})],64))}},ct=N(at,[["__scopeId","data-v-adfa102e"]]);export{ct as default};
