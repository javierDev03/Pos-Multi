import{_ as B}from"./HeadLogo-BA8DlMdf.js";import{b as D,a as P,_ as V}from"./SectionTitleLineWithButton-CORxjxXV.js";import{_ as S,h as j,E as z}from"./jspdf.es.min-C7hkvkyA.js";import{a4 as I}from"./colors-CEsUPgXD.js";import{C as f,r as M}from"./chart-CH8-U_Kh.js";import{r as h,z as N,J as F,o as u,a as m,b as n,d as g,F as w,u as q,e as t,l as y,g as G,q as O,t as p}from"./app-C8VQvZ0f.js";import"./main-C82n4mBH.js";import"./BaseDivider-ugWBZYPJ.js";const R={id:"charts-pdf-content",class:"p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-lg shadow relative"},T={class:"absolute top-4 right-4 z-10 no-capture"},W={class:"rounded-md bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-md dark:shadow-lg"},J={class:"mt-8 overflow-x-auto shadow-md rounded-lg"},L={class:"min-w-full border border-gray-200 dark:border-gray-700"},U={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700"},H={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700"},Z={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700"},K={class:"bg-gray-100 dark:bg-gray-600 font-semibold"},Q={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700"},dt={__name:"ArticlesByStatus",props:{statuses:{type:Array,required:!0}},setup(v){const o=v;function b(e,r=.5){return`hsla(${e*60%360}, 70%, 70%, ${r})`}const C=o.statuses.map(e=>b(e.id,.5)),_=o.statuses.map(e=>b(e.id,1));f.register(...M);const E=h({labels:o.statuses.map(e=>e.name),datasets:[{label:"Cantidad de Artículos",data:o.statuses.map(e=>e.total),backgroundColor:C,borderColor:_,borderWidth:1}]}),$=h({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Distribución de Artículos por Estatus"}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}});let i=null;N(()=>{const e=document.getElementById("articlesChart");e&&(i=new f(e,{type:"bar",data:E.value,options:$.value}))}),F(()=>{i&&(i.destroy(),i=null)});async function c(e="pdf"){try{const r=document.getElementById("charts-pdf-content");if(!r)return;const s=document.querySelectorAll(".no-capture");s.forEach(a=>a.style.visibility="hidden");const d=await j(r,{backgroundColor:null,scale:2,logging:!1,useCORS:!0});s.forEach(a=>a.style.visibility="visible");const l=d.toDataURL(`image/${e==="pdf"?"png":e}`);if(e==="pdf"){const a=new z("p","mm","a4"),x=a.getImageProperties(l),k=a.internal.pageSize.getWidth(),A=x.height*k/x.width;a.addImage(l,"PNG",0,0,k,A),a.save("graficas.pdf")}else{const a=document.createElement("a");a.href=l,a.download=`graficas.${e}`,a.click()}}catch(r){console.error("Error al generar el documento:",r)}}return(e,r)=>(u(),m(w,null,[n(B,{title:"Artículos Por Estatus"}),n(D,null,{default:g(()=>[n(P,null,{default:g(()=>[n(V,{icon:q(I),title:"Artículos Por Estatus",main:""},null,8,["icon"]),t("div",R,[t("div",T,[n(S,null,{trigger:g(()=>r[3]||(r[3]=[t("button",{class:"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 text-sm text-gray-800 dark:text-white px-3 py-2 rounded"}," Opciones ",-1)])),content:g(()=>[t("ul",W,[t("li",null,[t("button",{onClick:r[0]||(r[0]=s=>c("png")),class:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"},r[4]||(r[4]=[t("span",{class:"flex items-center"},[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})]),y(" Descargar PNG ")],-1)]))]),t("li",null,[t("button",{onClick:r[1]||(r[1]=s=>c("jpg")),class:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"},r[5]||(r[5]=[t("span",{class:"flex items-center"},[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})]),y(" Descargar JPG ")],-1)]))]),t("li",null,[t("button",{onClick:r[2]||(r[2]=s=>c("pdf")),class:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"},r[6]||(r[6]=[t("span",{class:"flex items-center"},[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})]),y(" Descargar PDF ")],-1)]))])])]),_:1})]),r[11]||(r[11]=t("div",{class:"chart-container",style:{position:"relative",height:"400px",width:"100%"}},[t("canvas",{id:"articlesChart"})],-1)),t("div",J,[r[10]||(r[10]=t("h2",{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200"},"Datos detallados por estatus",-1)),t("table",L,[r[9]||(r[9]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{scope:"col",class:"px-4 sm:px-6 py-3 border-b border-gray-200 dark:border-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Estatus del Artículo "),t("th",{scope:"col",class:"px-4 sm:px-6 py-3 border-b border-gray-200 dark:border-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Cantidad "),t("th",{scope:"col",class:"px-4 sm:px-6 py-3 border-b border-gray-200 dark:border-gray-700 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Porcentaje ")])],-1)),t("tbody",null,[(u(!0),m(w,null,G(o.statuses,(s,d)=>(u(),m("tr",{key:d,class:O({"bg-gray-50 dark:bg-gray-700":d%2===0,"bg-white dark:bg-gray-800":d%2!==0})},[t("td",U,p(s.name),1),t("td",H,p(s.total),1),t("td",Z,p(Math.round(s.total/o.statuses.reduce((l,a)=>l+a.total,0)*100))+"% ",1)],2))),128)),t("tr",K,[r[7]||(r[7]=t("td",{class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700"}," Total ",-1)),t("td",Q,p(o.statuses.reduce((s,d)=>s+d.total,0)),1),r[8]||(r[8]=t("td",{class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700"}," 100% ",-1))])])])])])]),_:1})]),_:1})],64))}};export{dt as default};
